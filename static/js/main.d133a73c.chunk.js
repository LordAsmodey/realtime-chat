(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{55:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return k}));var c=a(7),s=a(46),n=a.n(s),i=a(36),r=a(31),l=a(15),d=(a(55),a(17)),o=a(35),j=a(16),b=function(){return Object(j.jsx)("div",{children:"Realtime chat"})},u=a(0),m=a.n(u),h=a(3),O=a(25),p=function(){var e=Object(c.useContext)(k).authChatApp,t=Object(o.a)(e),a=Object(l.a)(t,1)[0],s=function(){var t=Object(h.a)(m.a.mark((function t(){var a,c,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new O.c,t.next=3,e.signInWithPopup(a);case 3:c=t.sent,s=c.userInfo,console.log(s);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:Object(j.jsxs)("div",{id:"navbarBasicExample",className:"navbar-menu",children:[Object(j.jsxs)("div",{className:"navbar-start",children:[Object(j.jsx)(i.b,{to:"/",className:"navbar-item",children:"Home"}),Object(j.jsx)(i.b,{to:"/chat",className:"navbar-item",children:"Chat"}),Object(j.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(j.jsx)("a",{href:"/#",className:"navbar-link",children:"More"}),Object(j.jsxs)("div",{className:"navbar-dropdown",children:[Object(j.jsx)("a",{href:"/#",className:"navbar-item",children:"About"}),Object(j.jsx)("a",{href:"/#",className:"navbar-item",children:"Jobs"}),Object(j.jsx)("a",{href:"/#",className:"navbar-item",children:"Contact"}),Object(j.jsx)("hr",{className:"navbar-divider"}),Object(j.jsx)("a",{href:"/#",className:"navbar-item",children:"Report an issue"})]})]})]}),Object(j.jsx)("div",{className:"navbar-end",children:Object(j.jsx)("div",{className:"navbar-item",children:Object(j.jsxs)("div",{className:"buttons",children:[a&&Object(j.jsx)("button",{type:"button",className:"button is-primary",onClick:function(){e.signOut()},children:"Logout"}),!a&&Object(j.jsx)("button",{type:"button",className:"button is-primary",onClick:s,children:"Login in chat"})]})})})]})})},v=a(47),x=a(48),f=a.n(x),N=(a(57),a(58),function(){return Object(j.jsx)("div",{className:"Loader","data-cy":"Loader",children:Object(j.jsx)("div",{className:"Loader__content"})})}),g=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],n=Object(c.useContext)(k),i=n.authChatApp,d=n.firestore,b=Object(o.a)(i),u=Object(l.a)(b,1)[0],O=Object(v.a)(d.collection("messages").orderBy("createdAt")),p=Object(l.a)(O,2),x=p[0],g=p[1],y=function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.collection("messages").add({uid:null===u||void 0===u?void 0:u.uid,displayName:null===u||void 0===u?void 0:u.displayName,photoURL:null===u||void 0===u?void 0:u.photoURL,message:a,createdAt:r.a.firestore.FieldValue.serverTimestamp()}),s("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(x),Object(j.jsxs)(j.Fragment,{children:[!u&&Object(j.jsx)("p",{children:"Please login!"}),g&&Object(j.jsx)(N,{}),u&&!g&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"box chat ",children:null===x||void 0===x?void 0:x.map((function(e){return Object(j.jsxs)("div",{className:f()("card message",{"is-link":(null===u||void 0===u?void 0:u.uid)===e.uid,"is-warning":(null===u||void 0===u?void 0:u.uid)!==e.uid}),children:[Object(j.jsx)("div",{className:"card-image"}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"media",children:[Object(j.jsx)("div",{className:"media-left",children:Object(j.jsx)("figure",{className:"image is-48x48",children:Object(j.jsx)("img",{src:e.photoURL,alt:"img"})})}),Object(j.jsxs)("div",{className:"media-content",children:[Object(j.jsx)("p",{className:"title is-4",children:e.displayName}),Object(j.jsx)("time",{dateTime:"2016-1-1",children:"DATE"})]})]}),Object(j.jsx)("div",{className:"content",children:e.message})]})]},e.createdAt)}))}),Object(j.jsxs)("div",{className:"field has-addons has-addons-fullwidth",children:[Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("input",{className:"input is-fullwidth",type:"text",placeholder:"Enter text message",value:a,onChange:function(e){return s(e.target.value)}})}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{type:"button",className:"button is-info ml-3",onClick:y,children:"Send message"})})]})]})]})},y=function(){var e=Object(d.l)(),t=Object(c.useContext)(k).authChatApp,a=Object(o.a)(t),s=Object(l.a)(a,2),n=s[0],i=s[1];return Object(c.useEffect)((function(){n&&e("/chat"),n||e("/")}),[n]),Object(j.jsxs)("div",{className:"app container mt-3 p-5",children:[i&&Object(j.jsx)(N,{}),!i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(p,{}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/",element:Object(j.jsx)(b,{})}),Object(j.jsx)(d.a,{path:"chat",element:Object(j.jsx)(g,{})}),Object(j.jsx)(d.a,{path:"*",element:Object(j.jsx)("h1",{children:"Not found page!"})})]})]})]})};a(28),a(59);r.a.initializeApp({apiKey:"AIzaSyD_7MQE8DGQwpVCooYvhUlMmdkZ0LfGqAY",authDomain:"realtime-chat-22446.firebaseapp.com",projectId:"realtime-chat-22446",storageBucket:"realtime-chat-22446.appspot.com",messagingSenderId:"417013582742",appId:"1:417013582742:web:ee80c2af72da4740e82bb7",measurementId:"G-6SKKXNZN3G"});var C=r.a.auth(),w=r.a.firestore(),k=Object(c.createContext)(null);n.a.render(Object(j.jsx)(k.Provider,{value:{firebase:r.a,authChatApp:C,firestore:w},children:Object(j.jsx)(i.a,{children:Object(j.jsx)(y,{})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.d133a73c.chunk.js.map