{"version":3,"sources":["Components/LoginPage/LoginPage.tsx","Components/Header/Header.tsx","Components/Loader/Loader.tsx","Components/Chat/Chat.tsx","App.tsx","index.tsx"],"names":["LoginPage","Header","authChatApp","useContext","Context","useAuthState","user","login","a","loginProvider","GoogleAuthProvider","signInWithPopup","userInfo","console","log","className","role","aria-label","id","to","href","type","onClick","signOut","Loader","data-cy","Chat","useState","message","setMessage","firestore","useCollectionData","collection","orderBy","messages","isLoading","sendMessage","add","uid","displayName","photoURL","createdAt","firebase","FieldValue","serverTimestamp","map","msg","cn","src","alt","dateTime","placeholder","value","onChange","event","target","App","navigate","useNavigate","useEffect","path","element","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.d133a73c.chunk.js","sourcesContent":["import React from 'react';\n\nexport const LoginPage: React.FC = () => {\n  return (\n    <div>\n      Realtime chat\n    </div>\n  );\n};\n","import React, { useContext } from 'react';\nimport { GoogleAuthProvider } from 'firebase/auth';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { Link } from 'react-router-dom';\n// eslint-disable-next-line import/no-cycle\nimport { Context } from '../../index';\n\nexport const Header: React.FC = () => {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  const { authChatApp } = useContext(Context);\n  const [user] = useAuthState(authChatApp);\n\n  const login = async () => {\n    const loginProvider = new GoogleAuthProvider();\n    const { userInfo } = await authChatApp.signInWithPopup(loginProvider);\n\n    // eslint-disable-next-line no-console\n    console.log(userInfo);\n  };\n\n  return (\n    <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n\n      <div id=\"navbarBasicExample\" className=\"navbar-menu\">\n        <div className=\"navbar-start\">\n          <Link to=\"/\" className=\"navbar-item\">\n            Home\n          </Link>\n\n          <Link to=\"/chat\" className=\"navbar-item\">\n            Chat\n          </Link>\n\n          <div className=\"navbar-item has-dropdown is-hoverable\">\n            <a href=\"/#\" className=\"navbar-link\">\n              More\n            </a>\n\n            <div className=\"navbar-dropdown\">\n              <a href=\"/#\" className=\"navbar-item\">\n                About\n              </a>\n              <a href=\"/#\" className=\"navbar-item\">\n                Jobs\n              </a>\n              <a href=\"/#\" className=\"navbar-item\">\n                Contact\n              </a>\n              <hr className=\"navbar-divider\" />\n              <a href=\"/#\" className=\"navbar-item\">\n                Report an issue\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"navbar-end\">\n          <div className=\"navbar-item\">\n            <div className=\"buttons\">\n              {user && (\n                <button\n                  type=\"button\"\n                  className=\"button is-primary\"\n                  onClick={() => {\n                    authChatApp.signOut();\n                  }}\n                >\n                  Logout\n                </button>\n              )}\n              {!user && (\n                <button\n                  type=\"button\"\n                  className=\"button is-primary\"\n                  onClick={login}\n                >\n                  Login in chat\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n","import './Loader.scss';\nimport React from 'react';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useContext, useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport cn from 'classnames';\nimport firebase from 'firebase/compat';\n// eslint-disable-next-line import/no-cycle\nimport { Context } from '../../index';\nimport './Chat.scss';\nimport { Loader } from '../Loader';\nimport { Message } from '../../Types/Message';\n\nexport const Chat: React.FC = () => {\n  const [message, setMessage] = useState('');\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  const { authChatApp, firestore } = useContext(Context);\n  const [user] = useAuthState(authChatApp);\n  const [messages, isLoading] = useCollectionData<Message>(\n    firestore.collection('messages').orderBy('createdAt'),\n  );\n\n  const sendMessage = async () => {\n    firestore.collection('messages').add({\n      uid: user?.uid,\n      displayName: user?.displayName,\n      photoURL: user?.photoURL,\n      message,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    });\n    setMessage('');\n  };\n\n  // eslint-disable-next-line no-console\n  console.log(messages);\n\n  return (\n    <>\n      {!user && (\n        <p>Please login!</p>\n      )}\n      {isLoading && <Loader />}\n      {user && !isLoading && (\n        <>\n          <div className=\"box chat \">\n            {messages?.map(msg => (\n              <div\n                key={msg.createdAt}\n                className={cn('card message',\n                  {\n                    'is-link': user?.uid === msg.uid,\n                    'is-warning': user?.uid !== msg.uid,\n                  })}\n              >\n                <div className=\"card-image\">\n                </div>\n                <div className=\"card-content\">\n                  <div className=\"media\">\n                    <div className=\"media-left\">\n                      <figure className=\"image is-48x48\">\n                        <img\n                          src={msg.photoURL}\n                          alt=\"img\"\n                        />\n                      </figure>\n                    </div>\n                    <div className=\"media-content\">\n                      <p className=\"title is-4\">{msg.displayName}</p>\n                      <time dateTime=\"2016-1-1\">DATE</time>\n                    </div>\n                  </div>\n\n                  <div className=\"content\">\n                    {msg.message}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n          <div className=\"field has-addons has-addons-fullwidth\">\n            <div className=\"control\">\n              <input\n                className=\"input is-fullwidth\"\n                type=\"text\"\n                placeholder=\"Enter text message\"\n                value={message}\n                onChange={(event) => setMessage(event.target.value)}\n              />\n            </div>\n            <div className=\"control\">\n              <button\n                type=\"button\"\n                className=\"button is-info ml-3\"\n                onClick={sendMessage}\n              >\n                Send message\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n","import React, { useContext, useEffect } from 'react';\nimport './App.scss';\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport { useAuthState } from 'react-firebase-hooks/auth';\n// eslint-disable-next-line import/no-cycle\nimport { LoginPage } from './Components/LoginPage/LoginPage';\n// eslint-disable-next-line import/no-cycle\nimport { Context } from './index';\n// eslint-disable-next-line import/no-cycle\nimport { Header } from './Components/Header/Header';\n// eslint-disable-next-line import/no-cycle\nimport { Chat } from './Components/Chat/Chat';\nimport { Loader } from './Components/Loader';\n\nexport const App: React.FC = () => {\n  const navigate = useNavigate();\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  const { authChatApp } = useContext(Context);\n  const [user, isLoading] = useAuthState(authChatApp);\n\n  useEffect(() => {\n    if (user) {\n      navigate('/chat');\n    }\n\n    if (!user) {\n      navigate('/');\n    }\n  }, [user]);\n\n  return (\n    <div className=\"app container mt-3 p-5\">\n      {isLoading && <Loader />}\n      {!isLoading && (\n        <>\n          <Header />\n          <Routes>\n            <Route path=\"/\" element={<LoginPage />} />\n            <Route path=\"chat\" element={<Chat />} />\n            <Route path=\"*\" element={<h1>Not found page!</h1>} />\n          </Routes>\n        </>\n      )}\n    </div>\n  );\n};\n","import React, { createContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from 'react-router-dom';\nimport firebase from 'firebase/compat';\n// eslint-disable-next-line import/no-cycle\nimport { App } from './App';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport './index.scss';\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyD_7MQE8DGQwpVCooYvhUlMmdkZ0LfGqAY',\n  authDomain: 'realtime-chat-22446.firebaseapp.com',\n  projectId: 'realtime-chat-22446',\n  storageBucket: 'realtime-chat-22446.appspot.com',\n  messagingSenderId: '417013582742',\n  appId: '1:417013582742:web:ee80c2af72da4740e82bb7',\n  measurementId: 'G-6SKKXNZN3G',\n});\n\nconst authChatApp = firebase.auth();\nconst firestore = firebase.firestore();\n\nexport const Context = createContext<Object | null>(null);\n\nReactDOM.render(\n  <Context.Provider value={{\n    firebase,\n    authChatApp,\n    firestore,\n  }}\n  >\n    <Router>\n      <App />\n    </Router>\n  </Context.Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}